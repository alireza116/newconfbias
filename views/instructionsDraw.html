<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Uncerainty Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
      integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
      integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
      crossorigin=""
    ></script>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/css/instructions.css" />
    <style>
      .charts {
        height: 600px;
      }
      .chart {
        height: 100%;
      }
      .chartdraw {
        margin: 0 auto;
      }
      .uncertaintyPaths {
        pointer-events: none;
      }
      svg {
        display: block;
        margin: 0 auto;
        cursor: pointer;
      }
      .line {
        pointer-events: none;
      }
      .uncertainty {
        pointer-events: none;
      }
      .chartChoice {
        margin-bottom: 50px;
      }
      .loader {
        position: absolute;
        height: 200px;
        width: 200px;
        left: 50%;
        margin-left: -100px;
        top: 50%;
        margin-top: -100px;
        display: none;
      }
      .exampleImage {
        width: 500px;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <div class="container bg-light main" id="instructions">
      <h3>Instructions - Round 1</h3>

      <p>
        Throughout the task you will create a line chart which represents your
        belief about the true relationship between two variables. In this page,
        we will practice with the line chart!
      </p>
      <!-- 
      <img
        src="/images/beliefdraw.gif"
        style="width:75%; margin: 0 auto; display:block"
        alt=""
      /> -->

      <p>
        The red line represents what you think is the
        <b>most likely</b> relationship between the two variables. First you
        will use the mouse to adjust the angle of the line according to what you
        think is the most likely relationship, then you will <em>click</em> the
        mouse button to record your response.
      </p>

      <p>
        The gray lines represent <b>plausible alternatives</b> that you think
        have some chance of representing the true relationship, but are less
        likely than the red line. After you set the angle of the red line, you
        will adjust the set of plausible alternatives that you think could also
        represent the relationship between the variables. You can select the
        gray lines after selecting the red line.
      </p>

      <hr />
      <p>
        Now let's practice recording your belief about the relationship between
        two variables, weight and height. Move the mouse over the chart until
        the angle of the red line represents what you think is the most likely
        relationship between the variables Weight and Height, then click to
        record your response. Next, move the mouse again in order to adjust the
        set of plausible alternatives (gray lines) to include relationships
        between the two variables that are plausible, but less likely, than the
        red line. When you are finished, click the mouse again to record your
        response.
      </p>

      <div class="chartChoice">
        <div class="row charts">
          <div class="col-6 chartdraw">
            <div id="chart1" class="chart" style="margin: 0 auto"></div>
          </div>
        </div>

        <hr />

        <p>
          The set of plausible alternatives (gray lines) should capture how
          uncertain you are about the relationship between the two variables.
          For example, if you were highly confident that height and weight had a
          strongly positive relationship (such that taller people almost always
          also weigh more) then your response might look something like this:
        </p>

        <img
          class="exampleImage"
          src="/images/confExample.png"
          style="margin: 0 auto; display:block"
          alt=""
        />

        <p>
          In contrast, if you were uncertain about the relationship between
          height and weight (e.g., if you think slightly negative relationships
          are plausible even though a positive relationship is most likely),
          your response might look something like this:
        </p>

        <img
          class="exampleImage"
          src="/images/uncertainExample.png"
          style="margin: 0 auto; display:block"
          alt=""
        />

        <div class="row choices">
          <div class="col" style="margin: 0 auto; text-align: center;">
            <button class="btn btn-secondary" style="margin: 0 auto" id="next">
              Continue
            </button>
          </div>
        </div>
      </div>
      <!-- 
      <button type="submit" class="btn btn-secondary" id="consent">
        Continue
      </button> -->
    </div>

    <!-- <script src="/js/article.js"></script> -->
    <!-- <script src="/js/study.js"></script> -->
    <img class="loader" src="/images/loader.gif" />
    <script src="/js/lineChartDraw.js"></script>
    <script>
      $("#sidebar").height(function() {
        return $("html").height();
      });
    </script>
    <script>
      //    window.location.assign("/consent");
      // $("#consent").click(function(event) {
      //   event.preventDefault();
      //   window.location.assign("/intermission");
      // });
    </script>
    <script>
      var variables = [["weight", "height"]];
      var variableIndex = 0;
      var startTime = Date.now();
      var chart1 = new LineChartDraw("chart1", variables[variableIndex]);
      var uniform = d3.randomUniform(-1, 1);
      var slope1 = uniform();
      chart1.createChart(slope1);
      $("#next").click(function(event) {
        event.preventDefault;
        if (variableIndex === variables.length - 1) {
          if (uncertaintySelected & selected) {
            window.location.assign("/instructions/scatter");
          } else {
            alert(
              "please familiarize yourself with the interactive chart at the top of this page. Your first click sets your belief about the most liekly correlation, and next click sets a range for your uncertainty. if you want to change your choices, you can click on the rest button. After you have tried the chart and selected a belief and uncertainty range, click to continue"
            );
          }
        } else {
          $(".loader").css("display", "block");
          $(".main").css("opacity", "0.1");
          setTimeout(function() {
            $(".loader").css("display", "none");
            $(".main").css("opacity", "1");
          }, 1000);
          variableIndex++;
          d3.select("svg").remove();
          uncertaintySelected = false;
          selected = false;
          var chart1 = new LineChartDraw("chart1", variables[variableIndex]);
          var uniform = d3.randomUniform(-1, 1);
          var slope1 = uniform();
          chart1.createChart(slope1);
        }
      });
      // $.get("/api/data", function(data) {
      //   var variables = data;
      //   $(".varX").text(variables[0]);
      //   $(".varY").text(variables[1]);
      // });
    </script>
  </body>
</html>
<!-- window.location.assign("/intermission"); -->
